<?
require 'include/connection.php';
$alltasks = R::find( 'tasks', 'user_id=?',array($_SESSION['logged_user']['id']));
foreach($alltasks as $task){
	
	?>
	<div class = item>
		<form id="item-form" action ="update.php" method ='POST'>
			<input type ='hidden' name="item_task_id" value = <?=$task->id?>>
			<input type ='hidden' name="item_user_id" value = <?=$task->user_id?>>
			<input class ='task-Name-col' type = 'text' name = 'item_task_name' readonly <?if($task->is_done != 0):?> style='text-decoration: line-through;' <?endif?> value = <?=$task->task_name?> >
			<textarea class = 'task-Description-col' name = 'item_task_description' rows = '5' cols = '50'
			 <?if($task->is_done != 0):?> style='text-decoration: line-through;' <?endif?> readonly><?=$task->task_description?></textarea>
			
			<div class = 'before-wrapper'>
				<input class ='checkbox-value' type = 'checkbox' name="item_is_done" <?if($task->is_done != 0):?> checked <?endif?>>
				<button class = 'btn-add-form-svg change-button' name='do_update' type ='submit'>
						<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 490 490" xml:space="preserve">
						<path d="M347.878,151.357c-4-4.003-11.083-4.003-15.083,0L129.909,354.414c-2.427,2.429-3.531,5.87-2.99,9.258
							c0.552,3.388,2.698,6.307,5.76,7.84l16.656,8.34v28.049l-51.031,14.602l-51.51-51.554l14.59-51.075h28.025l8.333,16.67
							c1.531,3.065,4.448,5.213,7.833,5.765c0.573,0.094,1.146,0.135,1.708,0.135c2.802,0,5.531-1.105,7.542-3.128L317.711,136.26
							c2-2.002,3.125-4.712,3.125-7.548c0-2.836-1.125-5.546-3.125-7.548l-39.229-39.263c-2-2.002-4.708-3.128-7.542-3.128h-0.021 c-2.844,0.01-5.563,1.147-7.552,3.159L45.763,301.682c-0.105,0.107-0.1,0.27-0.201,0.379c-1.095,1.183-2.009,2.549-2.487,4.208 l-18.521,64.857L0.409,455.73c-1.063,3.722-0.021,7.736,2.719,10.478c2.031,2.033,4.75,3.128,7.542,3.128 c0.979,0,1.958-0.136,2.927-0.407l84.531-24.166l64.802-18.537c0.195-0.056,0.329-0.203,0.52-0.27 c0.673-0.232,1.262-0.61,1.881-0.976c0.608-0.361,1.216-0.682,1.73-1.146c0.138-0.122,0.319-0.167,0.452-0.298l219.563-217.789
							c2.01-1.991,3.146-4.712,3.156-7.558c0.01-2.836-1.115-5.557-3.125-7.569L347.878,151.357z"/><path d="M456.836,76.168l-64-64.054c-16.125-16.139-44.177-16.17-60.365,0.031l-39.073,39.461 c-4.135,4.181-4.125,10.905,0.031,15.065l108.896,108.988c2.083,2.085,4.813,3.128,7.542,3.128c2.719,0,5.427-1.032,7.51-3.096
							l39.458-39.137c8.063-8.069,12.5-18.787,12.5-30.192S464.899,84.237,456.836,76.168z"/>
						</svg>				
				</button>
			</div>
			<div class = item-wrapper>
				<div class = 'info-wrapper' >
					<span class = 'title' <?if($task->is_done != 0):?> style='text-decoration: line-through;' <?endif?>><strong><?=$task->task_name?></strong></span>
					<span class = 'description' ><?=$task->task_description?></span>
				</div>
				<div class = 'delete-wrapper'>
					<button class = 'btn-add-form-svg delete-button' type ='button'>
						<svg viewBox="0 0 450 450"  xmlns="http://www.w3.org/2000/svg">
							<path d="m128 168h192v-16h-192zm0 0"/><path d="m224 0c-123.710938
							0-224 100.289062-224 224s100.289062 224 224 224 224-100.289062 224-224c-.140625-123.652344-100.347656-223.859375-224-224zm112 176c0 4.417969-3.582031 8-8 8h-8.761719l-15.238281 152.800781c-.414062 4.101563-3.875 7.21875-8 7.199219h-144c-4.125.019531-7.585938-3.097656-8-7.199219l-15.199219-152.800781h-8.800781c-4.417969 0-8-3.582031-8-8v-32c0-4.417969 3.582031-8 8-8h81.472656c-.949218-2.5625-1.445312-5.269531-1.472656-8 0-13.253906 10.746094-24 24-24s24 10.746094 24 24c-.027344 2.730469-.523438 5.4375-1.472656 8h81.472656c4.417969 0 8 3.582031 8 8zm0 0"/><path d="m159.238281 328h129.5625l14.398438-144h-158.359375zm96.800781-104.992188c.292969-2.886718 2.125-5.390624 4.792969-6.542968 2.664063-1.148438 5.746094-.761719 8.046875 1.007812 2.300782 1.769532 3.460938 4.648438 3.03125 7.519532l-8 64c-.496094 3.992187-3.886718 6.996093-7.910156 7.007812-.335938 0-.667969-.023438-1-.0625-4.382812-.550781-7.492188-4.546875-6.945312-8.929688zm-40.039062.992188c0-4.417969 3.582031-8 8-8s8 3.582031 8 8v64c0 4.417969-3.582031 8-8 8s-8-3.582031-8-8zm-32.992188-7.9375c4.382813-.546875 8.378907 2.5625 8.929688 6.945312l8 64c.546875 4.382813-2.5625 8.378907-6.945312 8.929688-.328126.039062-.660157.058594-.992188.0625-4.03125-.003906-7.429688-3.007812-7.929688-7.007812l-8-64c-.546874-4.378907 2.558594-8.375 6.9375-8.929688zm0 0"/><path d="m232 128c0 4.417969-3.582031 8-8 8s-8-3.582031-8-8 3.582031-8 8-8 8 3.582031 8 8zm0 0"/>
						</svg>
					</button>
				</div>	
			</div>
			
		</form>
	</div>
	<?
}